#!/bin/bash

function diff {
  RANGE=$1
  git --no-pager log --graph --pretty=format:'%C(magenta)%h%C(auto)%d %s %C(green)(%cr) %C(bold blue)%an%C(white)/%C(cyan)%cn' $RANGE
  tput sgr0
  echo
}

function show_commit {
  COMMIT=$1
  git --no-pager log --graph -n 1 --pretty=format:'%C(magenta)%h%C(auto)%d %s %C(green)(%cr) %C(bold blue)%an%C(white)/%C(cyan)%cn' $COMMIT
  tput sgr0
  echo
}

function log_all {
  git log --graph --all --pretty=format:'%C(magenta)%h%C(auto)%d %s %C(green)(%cr) %C(bold blue)%an%C(white)/%C(cyan)%cn'
}

clear
if [ -z "$1" ]
then
  log_all
else
  COMMIT_RANGE=$1
  COMMITS=`sed "s/\.\./#/g" <<< "$1"`
  START_COMMIT=$(cut -d'#' -f1 <<< "$COMMITS")
  diff $COMMIT_RANGE
  show_commit $START_COMMIT
fi
